<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>chat app</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- Local -->
    <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
<div id="chatapp">
    <div class="container text-center">
        <h2>Babel Chat!</h2>
    </div>

    <div class="wrapper">
        <div class="card card-success text-center">
            <div class="card-header">
                <h2>online</h2>
            </div>
            <div class="card-body text-left">
                <ul>
                    <li v-for="user in users">{{user}}</li>
                </ul>
            </div>
        </div>
        <div class="card card-warning">
            <div class="card-block" id="chat-window">
                <div class="card-header bg-success text-white text-center">Chat</div>

                <!-- Chatlog -->
                <div id="log" ref = "log">
                    <template v-for="m in log">
                        <div v-if="m.type == 'log-msg'" class="chat-wrapper">
                            <div class="username text-center">{{m.handle[0].toUpperCase()}}</div>
                            <div :style = "{'color': handle_color}" class="chat-text">
                                <strong class="message-handle">{{m.handle}}:</strong>
                                {{m.message}}</div>
                        </div>
                        <div v-else-if="m.type == 'log-users'">
                            <div class="text-center" style="color: red">
                                {{m.handle + ' '}}{{m.message}}
                            </div>
                        </div>
                        <hr>
                    </template>
                </div>

                <!-- Is Typing -->
                <div v-if="users_typing.length">
                    {{users_typing.join(', ') + ' is typing ... '}}
                    <!-- <span v-for = "user of users_typing">{{user}},&nbsp</span> is typing... -->
                </div>
                <div v-else>&nbsp;</div>

                <!-- Message box -->
                <div class="card-footer">
                    <input v-model="handle_color" type="color">
                    <!--<input v-model="handle" id="handle" type="text" placeholder="Handle">-->
                    Translate to: <input v-model = "lang_to" id="lang_to" type="text">
                    <input v-model="message" @keyup = "emit_typing" @keyup.enter = "emit_chat" id="message" type="text" placeholder="Type here" autofocus>
                    <button @click="emit_chat" id="sendbutton" class="btn btn-success">Send</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<script src ="https://cdn.jsdelivr.net/npm/vue"></script>

<script src="chat.js"></script>